<div class="dashboard">
  <!-- Financial Summary Cards -->
  <div class="summary-cards">
    <div class="card income">
      <h3>Total Income</h3>
      <p>{{ financialSummary.total_income | currency }}</p>
    </div>
    <div class="card expense">
      <h3>Total Expense</h3>
      <p>{{ financialSummary.total_expense | currency }}</p>
    </div>
    <div class="card balance">
      <h3>Net Balance</h3>
      <p>{{ financialSummary.net_balance | currency }}</p>
    </div>
  </div>

  <!-- Income vs. Expense Chart -->
  <h3>Income vs. Expense</h3>
  <div class="chart-container" *ngIf="chartData.length != 0">
    <ngx-charts-line-chart [results]="chartData" [scheme]="colorScheme" [xAxis]="true" [yAxis]="true" [legend]="true"
      [showXAxisLabel]="true" [showYAxisLabel]="true" [xAxisLabel]="'Month'" [yAxisLabel]="'Amount'" [autoScale]="true"
      [tooltipDisabled]="false" [timeline]="true">
    </ngx-charts-line-chart>
  </div>


  <!-- Month Selector -->
  <div class="month-selector" *ngIf="months.length > 1">
    <mat-form-field appearance="fill">
      <mat-label>Select Month</mat-label>
      <mat-select [(value)]="selectedMonth" (selectionChange)="updateCategoryData()">
        <mat-option *ngFor="let month of months" [value]="month">{{ month }}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <!-- Pie Chart View Toggle -->
  <div class="pie-chart-toggle">
    <label for="view-toggle">View general data (all months) instead of selected month:</label>
    <input type="checkbox" id="view-toggle" [(ngModel)]="showGeneralCategoryData" (change)="updateCategoryData()" />
  </div>

  <!-- Category Breakdown Pie Chart -->
  <div class="chart-container" *ngIf="categoryData.length != 0">
    <ngx-charts-pie-chart [results]="categoryData" [scheme]="pieColorScheme" [legend]="true" [labels]="true">
    </ngx-charts-pie-chart>
  </div>

  <!-- Budget vs Actual Progress Bar -->
  <div class="budget-progress">
    <h3>Budget vs Actual</h3>
    <mat-progress-bar mode="determinate" [value]="budgetData.percent_spent"></mat-progress-bar>
    <p>{{ budgetData.actual_spent | currency }} spent out of {{ budgetData.budget | currency }}</p>
  </div>

  <!-- Recent Transactions -->
  <div class="recent-transactions">
    <h3>Recent Transactions</h3>
    <ul>
      <li *ngFor="let transaction of recentTransactions">
        <span>{{ transaction.category }}</span>
        <span>{{ transaction.amount | currency }}</span>
        <span>{{ transaction.transaction_type }}</span>
        <span>{{ transaction.date | date:'short' }}</span>
      </li>
    </ul>
  </div>
</div>